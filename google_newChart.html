<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="../jquery-3.1.1.min.js"></script>
    <script src="../jquery.csv.min.js"></script>
    <script type="text/javascript">
      google.charts.load("current", {packages:["corechart"]});
      google.charts.setOnLoadCallback(drawBasic);

      function drawBasic() {
        var data = google.visualization.arrayToDataTable([
          ['Task', 'Hours per Day'],
          ['Work',     8.5],
          ['Family',   1],
          ['Eat',      2],
          ['Commute',  1],
          ['Sleep',    7],
          ['Watch TV', 2],
          ['Exercise', 1.5],
          ['Read',     1]
        ]);

        var options = {
          title: 'My Daily Activities',
          is3D: true,
          width: '2000px',
          height: '1500px',
          pieSliceText: 'label',
        };

        var _bar = new google.visualization.PieChart(document.getElementById('chart_div'));
        _bar.draw(data, options);
      }
      
      function onMessage (evt) {
        if (evt && evt.data &&evt.data.hasOwnProperty("data"))
            updateData(evt.data);
              }
        if (window.addEventListener) {
            // For standards-compliant web browsers
            window.addEventListener("message", onMessage, false);
           }
        else {
            window.attachEvent("onmessage", onMessage);
           }

            //create trigger to resizeEnd event                                                                                               
      $(window).resize(function() {                                                                                                     
        if (this.resizeTo)                                                                                                              
        clearTImeout(this.resizeTO);                                                                                                    
        this.resizeTO = setTiemout(function() {                                                                                         
           $(this).trigger('resizeEnd');                                                                                                
        }, 25);                                                                                                                         
      });                                                                                                                               
                                                                                                                                        
      //redraw graph when window resize is completed                                                                                    
      $(window).on('resizeEnd', function() {                                                                                            
        drawChart();                                                                                                                    
      });                                                                                                                               
                                                                                                                                        
      function drawChart()                                                                                                              
        {                                                                                                                               
           if (bar)                                                                                                                     
               bar.draw(datam options);                                                                                                 
        }                                                                                                                               
                
    </script>
  </head>
  <body>
    <div id="chart_div"></div>
  </body>
</html>
